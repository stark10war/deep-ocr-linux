<!DOCTYPE html>

<html>
  <head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
      <link href="{{ url_for('static', filename='css/style.css') }}" rel="stylesheet">
  </head>
   <body>
   <h1> Deep OCR Demo</h1>
   <form id="upload-file" method="post" enctype="multipart/form-data">
    <fieldset>
        <label for="file">Select a file</label>
        <input name="file" type="file" accept="image/*" capture="camera">
    </fieldset>
    <fieldset>
        <button type='button' id ='retrieve'>Submit</button>
    </fieldset>
</form>
   <h1>Results</h1>
   <div class="row">
      <div class="column">
         <h2>Document Detection Model</h2>
         <img src="" id="myimg" style="width:100%">
      </div>
      <div class="column">
         <h2>Classification, orientation and entity detection with YOLO</h2>
         <img src="" id="myimg1" style="width:100%">
      </div>
      <div class="column">
          <h2> Tessaract OCR Results </h2>
          <p id="ocr-text">""</p>
  </div>
</div>

   </body>
  <script>

    $(document).ready(function() {
       $('#retrieve').click(function(){
           var form_data = new FormData($('#upload-file')[0]);
           $.ajax({
            type: 'POST',
            url: '/image',
            data: form_data,
            contentType: false,
            cache: false,
            processData: false,
           success: function(response) {
           console.log(response)
               $("#myimg").attr("src", "data:image/png;base64," + response.out_images.img);
               $("#myimg1").attr("src", "data:image/png;base64," + response.out_images.img1);
               var myJSON = JSON.stringify(response.data);
               document.getElementById("ocr-text").innerHTML = myJSON;
          },
          error: function(xhr) {
            //Do Something to handle error
         }
         });
       });
    });
  </script>
</html>



